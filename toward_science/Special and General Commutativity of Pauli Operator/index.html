
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../favicon_io/favicon-32x32.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.1">
    
    
      
        <title>Special and General Commutativity of Pauli Operator - Chika's Home</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2e8b5541.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#special-and-general-commutativity-of-pauli-operator" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Chika&#39;s Home" class="md-header__button md-logo" aria-label="Chika's Home" data-md-component="logo">
      
  <img src="../../favicon_io/android-chrome-512x512.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Chika's Home
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Special and General Commutativity of Pauli Operator
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hirasawakinko/chika_home" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    chika_home
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../about/" class="md-tabs__link">
      About Me
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../about_site/" class="md-tabs__link">
      About This Site
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../library/" class="md-tabs__link">
      Chika's Library
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../review_book/" class="md-tabs__link">
      Book Review
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../algorithms/" class="md-tabs__link">
      Algorithms
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../python/" class="md-tabs__link">
      Python Guide
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../how_to/" class="md-tabs__link">
      How to
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../" class="md-tabs__link">
      Toward Science
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../blog/" class="md-tabs__link">
      Blog
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Chika&#39;s Home" class="md-nav__button md-logo" aria-label="Chika's Home" data-md-component="logo">
      
  <img src="../../favicon_io/android-chrome-512x512.png" alt="logo">

    </a>
    Chika's Home
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hirasawakinko/chika_home" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    chika_home
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        About Me
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../about_site/" class="md-nav__link">
        About This Site
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../library/" class="md-nav__link">
        Chika's Library
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../review_book/" class="md-nav__link">
        Book Review
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/" class="md-nav__link">
        Algorithms
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../python/" class="md-nav__link">
        Python Guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/" class="md-nav__link">
        How to
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Toward Science
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../blog/" class="md-nav__link">
        Blog
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/hirasawakinko/chika_home/edit/master/docs/toward_science/Special and General Commutativity of Pauli Operator.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="special-and-general-commutativity-of-pauli-operator">Special and General Commutativity of Pauli Operator<a class="headerlink" href="#special-and-general-commutativity-of-pauli-operator" title="Permanent link">&para;</a></h1>
<p>Commutator = AB-BA. People have been wasting time on their shit code to do this arithematic straightly. Here I propose the new algorithm.</p>
<h1 id="premise">Premise<a class="headerlink" href="#premise" title="Permanent link">&para;</a></h1>
<h2 id="premise-pauli-operator">Premise: Pauli Operator<a class="headerlink" href="#premise-pauli-operator" title="Permanent link">&para;</a></h2>
<p>Pauli Operator is a set of 2x2 matrix denoted by symbols of {I, X, Y, Z}. They are matrix, so they obey every law of linear algebra. They are the core part of Quantum Computing.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>I = [ 1  0]
    [ 0  1]

X = [ 0  1]
    [ 1  0]

Y = [ 0  -j]
    [ j  0]

Z = [ 1  0]
    [ 0 -1]
</code></pre></div></td></tr></table></div>
<h2 id="premise-dictionary-for-pauli-operator-multiplication">Premise: Dictionary for Pauli Operator multiplication<a class="headerlink" href="#premise-dictionary-for-pauli-operator-multiplication" title="Permanent link">&para;</a></h2>
<p>First of all, we need a dictionary to check what is what, when two Pauli multiplied together, what will be the result. And since matrix multiplication is binary operation, the dictionary key consist of two consecutive Pauli Operator symbols.</p>
<p>I choose the approach that seperate Pauli Operator and its coefficient to reduce total count of loops in the program.</p>
<p><div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># Seperating Pauli Operator and its coefficient</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="n">lookup_xyz</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;XY&#39;</span><span class="p">:</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>               <span class="s1">&#39;YX&#39;</span><span class="p">:</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>               <span class="s1">&#39;XZ&#39;</span><span class="p">:</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>               <span class="s1">&#39;ZX&#39;</span><span class="p">:</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>               <span class="s1">&#39;YZ&#39;</span><span class="p">:</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>               <span class="s1">&#39;ZY&#39;</span><span class="p">:</span> <span class="s1">&#39;X&#39;</span> <span class="p">}</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="n">lookup_cof</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;XY&#39;</span><span class="p">:</span>  <span class="mi">1</span><span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>               <span class="s1">&#39;YX&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>               <span class="s1">&#39;XZ&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>               <span class="s1">&#39;ZX&#39;</span><span class="p">:</span>  <span class="mi">1</span><span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>               <span class="s1">&#39;YZ&#39;</span><span class="p">:</span>  <span class="mi">1</span><span class="n">j</span><span class="p">,</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>               <span class="s1">&#39;ZY&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="n">j</span> <span class="p">}</span>
</code></pre></div></td></tr></table></div>
But if you choose the compounded approach, you would need to call out element[0], element[1] which is a waste of time.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span>
<span class="normal"><a href="#__codelineno-1-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1"># Compounded Pauli Operator and its coefficient</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="n">lookup</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;XY&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span>  <span class="mi">1</span><span class="n">j</span><span class="p">),</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>           <span class="s1">&#39;YX&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="p">),</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>           <span class="s1">&#39;XZ&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="p">),</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>           <span class="s1">&#39;ZX&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span>  <span class="mi">1</span><span class="n">j</span><span class="p">),</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>           <span class="s1">&#39;YZ&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span>  <span class="mi">1</span><span class="n">j</span><span class="p">),</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>           <span class="s1">&#39;ZY&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="premise-terms-in-linear-combination-must-be-unique">Premise: Terms in linear combination must be unique<a class="headerlink" href="#premise-terms-in-linear-combination-must-be-unique" title="Permanent link">&para;</a></h2>
<p>By the way, this is all established in the premise of well defined dataset. Namely, all terms inside the linear combination are unique. For example let say we have a linear combination of two Z1 (see below). It will automatically merge them into one.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>QubitOperator(&#39;&#39;&#39;1 [Z1] + 1 [Z1]&#39;&#39;&#39;)
= 2 [Z1]
</code></pre></div></td></tr></table></div>
<p>I want the merged version. Otherwise my algorithm do not work.</p>
<h2 id="premise-comma-b-as-the-symbol-of-commutator">Premise: comm(A, B) as the symbol of commutator<a class="headerlink" href="#premise-comma-b-as-the-symbol-of-commutator" title="Permanent link">&para;</a></h2>
<p>The convention for mathematical symbol of commutator is [A, B]. Which stand for the arithematic operation of (AB - BA).</p>
<p>I must not use this anywhere in my article because this symbolically collides with Python code and bring unnecessary confusion textually.</p>
<p>Instead, I use comm(A, B) to represent the comumutator operation.</p>
<h1 id="singular-commutativity">Singular Commutativity<a class="headerlink" href="#singular-commutativity" title="Permanent link">&para;</a></h1>
<p>Single means only one term in the linear combination. Let's first deal with the most specific one, i.e. comm(single, single). </p>
<p>Say we have two Pauli Operator a and b. We need to check if they are commute to each other.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>a)  +1.0 Y0 X1 X2 Y3
b)  +1.0    Z1    X3

want: comm(a, b)

    comm(a, b)

=   comm( +1.0 Y0 X1 X2 Y3 , +1.0 Z1 X3)  # remember AB-BA

=   (+1.0 Y0 X1 X2 Y3)(+1.0 Z1 X3) - (+1.0 Z1 X3)(+1.0 Y0 X1 X2 Y3)
</code></pre></div></td></tr></table></div>
<p>How can we solve this? How to multiply Pauli Operator?</p>
<h2 id="multiplication-of-pauli-operator">Multiplication of Pauli Operator<a class="headerlink" href="#multiplication-of-pauli-operator" title="Permanent link">&para;</a></h2>
<p>First thing to know is that either a and b is tensor product of Pauli Operators with coefficient.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    [coefficient]   [tensor product of Pauli Operators]
a)  +1.0            Y0 X1 X2 Y3
b)  +1.0               Z1    X3
</code></pre></div></td></tr></table></div>
<p>The neat thing about tensor product is that the outcome is in fact index sensitive. Which means that you cannot seperate the XYZ and the index of it.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>        [Pauli XYZ] [index]
Z1 =    Z           1
X3 =    X           3
</code></pre></div></td></tr></table></div>
<p>Pauli Operator can only multiply to the same index.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>Z1 X3 == Z1 X3  # nothing happen since index differ
Z1 X1 == ZX1 = (Y1, 1j)  # Outcome is Y1 with coefficient 1j, according to the dictionary
</code></pre></div></td></tr></table></div>
<p>And the coefficient can be any usually number. You can do this multiplication vertically (or should say vistually)</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code>comm(a, b)
= comm( +1.0 Y0 X1 X2 Y3 , +1.0 Z1 X3)

= (+1.0 Y0 X1 X2 Y3) - (+1.0    Z1    X3)
  (+1.0    Z1    X3)   (+1.0 Y0 X1 X2 Y3)

= (+1.0 Y0 XZ1 X2 YX3) - (+1.0 Y0 ZX1 X2 XY3)

= (+1.0 Y0 -1jY1 X2 -1jZ3 ) - (+1.0 Y0 1jY1 X2 1jZ3)  # Refer to the dictionary to get new value

= (+1.0*-1j*-1j Y0 Y1 X2 Z3 ) - (+1.0*1j*1j Y0 Y1 X2 Z3)  # Factor out coefficient

= (-1.0 Y0 Y1 X2 Z3 ) - (-1.0 Y0 Y1 X2 Z3) # Multiply coefficient

= 0 Y0 Y1 X2 Z3

= 0
</code></pre></div></td></tr></table></div>
<p>So a and b is indeed commute.</p>
<h2 id="focusing-and-ignoring">Focusing and ignoring<a class="headerlink" href="#focusing-and-ignoring" title="Permanent link">&para;</a></h2>
<p>Already we can see some room for improvement.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>comm(a, b)
= comm( +1.0 Y0 X1 X2 Y3 , +1.0 Z1 X3)

= (+1.0 Y0 X1 X2 Y3) - (+1.0    Z1    X3)
  (+1.0    Z1    X3)   (+1.0 Y0 X1 X2 Y3)

= (+1.0 Y0 XZ1 X2 YX3) - (+1.0 Y0 ZX1 X2 XY3)  # Nothing is multiplied to index 0 and 2
...
=   (-1.0 Y0 Y1 X2 Z3 ) -   (-1.0 Y0 Y1 X2 Z3)  # index 0 and 2 remain unchanged
</code></pre></div></td></tr></table></div>
<p>In fact we can solely focus on those Pauli XYZ on common indices.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>  [focus]         [outfo]   [focus]         [outfo]
= (+1.0 X1 Y3     Y0 X2 ) - (+1.0 Z1 X3           )
  (+1.0 Z1 X3           )   (+1.0 X1 Y3     Y0 X2 )
</code></pre></div></td></tr></table></div>
<p>Since tensor product is index sensitive, not position sensitive, it doesn't matter how we sort or ordering it. Those outfo Pauli XYZ can in fact be ignored since we are 100% sure that they are the same thing. And we are looking at things that are potentially will be changed after arithematic i.e. [focus] part. I will prove this in the section of <a href="#uniqueness-of-pauli-xyz">Uniqueness of Pauli XYZ</a>. And we can countinue the remaining computation.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code>  [focus]         [focus]
= (+1.0 X1 Y3 ) - (+1.0 Z1 X3 )  # [outfo] is ignored
  (+1.0 Z1 X3 )   (+1.0 X1 Y3 )

= (+1.0 -1jY1 -1jZ3 ) - (+1.0 1jY1 1jZ3)  # Refer to the dictionary to get new value

= (+1.0*-1j*-1j Y1 Z3 ) - (+1.0*1j*1j Y1 Z3)  # Factor out coefficient

= (-1.0 Y1 Z3 ) - (-1.0 Y1 Z3) # Multiply coefficient

= 0 Y1 Z3

= 0  # Same result
</code></pre></div></td></tr></table></div>
<h2 id="predicting-pauli-operator">Predicting Pauli Operator<a class="headerlink" href="#predicting-pauli-operator" title="Permanent link">&para;</a></h2>
<p>You may notice that ordering do not affect the multiplication outcome for Pauli XYZ.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>XY == YX == Z
ZZ == ZZ == I
YI == IY == Y
</code></pre></div></td></tr></table></div>
<p>Hence we can bascially assume that the multiplication outcome for Pauli XYZ is always the same. 100% sure. Not even bother to check. So we can ignore one more thing: </p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>For example in such situation

(+1.0 XZ1 YX3) - (+1.0 ZX1 XY3)

In index 1 and index 3, we don&#39;t ask if the Pauli XYZ outcome of left part of the minus sign is the same accross the right part.

They must automatically the same.
</code></pre></div></td></tr></table></div>
<h2 id="predicting-coefficient">Predicting coefficient<a class="headerlink" href="#predicting-coefficient" title="Permanent link">&para;</a></h2>
<p>Here we multiply coefficient of both sides of the minus sign one by one. This could be computational intense when we have a lot to do. Is there a way to know the final result directly? Yes there is one.</p>
<p>Just look at the dictionary and you can see that the ordering only make result differ by the sign.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>&#39;XZ&#39;: (&#39;Y&#39;, -1j)
&#39;ZX&#39;: (&#39;Y&#39;,  1j)
</code></pre></div></td></tr></table></div>
<p>I describe this property as a cyclic group. Imagine that it is like the below arrangement. XYZ arranged on the edge of a circle. X at 12 o'clock, Y at 4 o'clock, Z at 8 o'clock. </p>
<p>If you count them counter clockwise.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>X =&gt; Y then you got 1jZ. 
Y =&gt; Z then you got 1jX. 
Z =&gt; X then you got 1jY. 
Positive sign for clockwise.

  X
Z   Y

XYZXYZXYZXYZXYZ  # clockwise
</code></pre></div></td></tr></table></div>
<p>If you count them counter anticlockwise. 
    Y=&gt;X then you got -1jZ.
    Z=&gt;Y then you got -1jX.
    X=&gt;Z then you got -1jY.
    Negative sign for anticlockwise.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ZYXZYXZYXZYXZYX  # anti-clockwise or counter-clockwisw
</code></pre></div></td></tr></table></div>
<p>Say we have a long tensor product to deal with.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code>comm(   +1.0 X0 Y1 Y2 Z3 X4 Z5 Z6 X7 Y8 Z9 , +1.0 Z0 X1 Y2 Y3 Z4 Y5 X6 Y7 Z8 Y9 )

= +1.0 X0 Y1 Y2 Z3 X4 Z5 Z6 X7 Y8 Z9 - +1.0 Z0 X1 Y2 Y3 Z4 Y5 X6 Y7 Z8 Y9
  +1.0 Z0 X1 Y2 Y3 Z4 Y5 X6 Y7 Z8 Y9   +1.0 X0 Y1 Y2 Z3 X4 Z5 Z6 X7 Y8 Z9

= +1.0 XZ YX YY ZY XZ ZY ZX XY YZ ZY - +1.0 ZX XY YY YZ ZX YZ XZ YX ZY YZ  
# Ommited indices

= +1.0 XZ YX ZY XZ ZY ZX XY YZ ZY - +1.0 ZX XY YZ ZX YZ XZ YX ZY YZ  
# (YY = I) so nothing have changed

= +1.0  1  1  1  1  1  0  0  0  1 - +1.0  0  0  0  0  0  1  1  1  0  
# Encode for clockwiseness. 0 for clockwise, 1 for anti-clockwise

# By stacking two sides we can see that the clockwiseness is opposite of each other
+1.0  1  1  1  1  1  0  0  0  1   
+1.0  0  0  0  0  0  1  1  1  0
</code></pre></div></td></tr></table></div>
<p>The clockwiseness is having opposite relationship. Hence here come another thing that we can ignore. We can solely keep track of the clockwiseness of the left part of the minus sign.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code># We solely have to look at this clockwiseness infomation
+1.0  1  1  1  1  1  0  0  0  1
</code></pre></div></td></tr></table></div>
<p>Clockwise imply coefficient of 1j.</p>
<p>Anticlockwise imply coefficient of -1j.</p>
<p>Here we can count how many Clockwise, how many Anticlockwise, to see the total number of each 1j and -1j.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>+1.0 XZ YX ZY XZ ZY ZX XY YZ ZY
+1.0  1  1  1  1  1  0  0  0  1  # 0 for clockwise, 1 for anti-clockwise

                [count]     [which means]
Clockwise:      3           ( 1j) ** 3
Anticlockwise:  6           (-1j) ** 6
</code></pre></div></td></tr></table></div>
<p>We can view -1j as (-1)*(1j) to seperate them. Therefore there are in total:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>## For the left term of the minus sign ##
    [count]     [value come from]
-1  6           count of Clockwise
1j  3+6         count of Clockwise + Anticlockwise

= (-1)**(Anticlockwise) * (1j)**(Clockwise + Anticlockwise)
</code></pre></div></td></tr></table></div>
<p>For the right term of the minus sign, you just need to swap the count of Clockwise and Anticlockwise.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>BE CAREFUL! The count of clockwiseness is with respect to the left term!

## For the right term of the minus sign ##
    [count]     [value come from]
-1  3           count of Anticlockwise
1j  3+6         count of Clockwise + Anticlockwise

= (-1)**(Clockwise) * (1j)**(Clockwise + Anticlockwise)
</code></pre></div></td></tr></table></div>
<p>So the whole thing is</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>left term - right term

= (-1)**(Anticlockwise) * (1j)**(Clockwise + Anticlockwise) 
- (-1)**(Clockwise) * (1j)**(Clockwise + Anticlockwise)

= (1j)**(Anticlockwise + Clockwise)
* [(-1)**(Clockwise) - (-1)**(Anticlockwise)]  # Factorization
</code></pre></div></td></tr></table></div>
<p>Since (1j)<strong>(Clockwise + Anticlockwise) can not be zero even when (Clockwise+Anticlockwise)==0 , we can ignore this part, and also (Clockwise+Anticlockwise) will never be negative. So this (1j)</strong>(Clockwise + Anticlockwise) part is not determining whether the end result of AB-BA is zero or not. </p>
<p>The part that we need to look at is [(-1)<strong>(Clockwise) - (-1)</strong>(Anticlockwise)] .</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code># Only this part matters
(-1)**(Anticlockwise) - (-1)**(Clockwise)
</code></pre></div></td></tr></table></div>
<p>Exponential of -1 have only two result. Either +1 or -1. Dependening of the power. Thus keep track of the parity is enought.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>+1 == (-1)**( odd number)
-1 == (-1)**(even number)
</code></pre></div></td></tr></table></div>
<p>In totalt 4 situations:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>+1 - (+1) = 0
+1 - (-1) = 2
-1 - (+1) = 2
-1 - (-1) = 0
</code></pre></div></td></tr></table></div>
<p>Also we can see that if the result is non-zero, it must be a coefficient of 2. Cases when result is zero is that one side has the opposite sign of another side. So so only need to perform parity check, and this can determine whether (AB - BA) is zero or not.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code>Parity Check
= Anticlockwise%2 ^ Clockwise%2  # Binary XOR

so if Anticlockwise%2 != Clockwise%2,
there must left with a remainder =&gt; not equals to zero =&gt; non commute

side note for Binary XOR
    0^0 == 0
    0^1 == 1
    1^0 == 1
    1^1 == 0
thus we can use this to check for parity.
</code></pre></div></td></tr></table></div>
<h2 id="code">Code<a class="headerlink" href="#code" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">commutator_singular</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">def</span> <span class="nf">commutator_singular</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>    <span class="c1"># Only clockwiseness dictionary is needed</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="n">lookup</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;XY&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>               <span class="s1">&#39;YX&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>               <span class="s1">&#39;XZ&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>               <span class="s1">&#39;ZX&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>               <span class="s1">&#39;YZ&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>               <span class="s1">&#39;ZY&#39;</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>  <span class="c1"># Self commute</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>        <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>    <span class="n">a_key</span><span class="p">,</span> <span class="n">b_key</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>  <span class="c1"># We don&#39;t need coefficient</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a>    <span class="c1"># Extract common indices</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>    <span class="n">intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">a_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>    <span class="k">if</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a>        <span class="n">clw</span> <span class="o">=</span> <span class="n">aclw</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a>            <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a_key</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">b_key</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a>            <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>  <span class="c1"># Skip XX YY ZZ</span>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a>                <span class="n">anticlock</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a>                <span class="k">if</span> <span class="n">anticlock</span><span class="p">:</span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a>                    <span class="n">aclw</span> <span class="o">^=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a>                    <span class="n">clw</span> <span class="o">^=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a>        <span class="k">if</span> <span class="n">aclw</span> <span class="o">^</span> <span class="n">clw</span> <span class="p">:</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a>            <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a>    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
<h1 id="special-commutativity">Special Commutativity<a class="headerlink" href="#special-commutativity" title="Permanent link">&para;</a></h1>
<p>Now we have the knowledge of how to do comm(single, single), let see how to do the more generalized one i.e. comm(multiple, single) . Let's denote this as comm(AA, B) for there is now more stuff inside the left slot.</p>
<h2 id="linearity-of-commutator-and-broadcasting">Linearity of commutator and broadcasting<a class="headerlink" href="#linearity-of-commutator-and-broadcasting" title="Permanent link">&para;</a></h2>
<p>Let see what actually is comm(AA, B).</p>
<p>Commutator is a linear function which means that you can 'broadcast' the function.</p>
<p>Just like how you would multiply c(x + y) =&gt; (cx + cy), you broadcast the c to everyone inside parentheses.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code>comm( (H+J+K) , B )
= comm(H, B) + comm(J, B) + comm(K, B)

comm(AA, B)
= comm( -1.0             , +1.0 Z1 X3  )
        +1.0 X0 Y1 Y2 X3
        +1.0 Y0 X1 X2 Y3
        -1.0 X0 X1 Y2 Y3
        -1.0 Y0 Y1 X2 X3
        +1.0 Z0
        +1.0 Z0 Z1
        +1.0 Z0    Z2
        +1.0 Z0       Z3
        +1.0 Z1
        +1.0 Z1    Z2
        +1.0 Z1       Z3
        -1.0 Z2
        +1.0 Z2       Z3
        -1.0 Z3
</code></pre></div></td></tr></table></div>
<p>So you broadcast B := 1.0 [Z1 X3] to all terms in AA.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code>= comm( -1.0             , +1.0 Z1 X3 )
 +comm( +1.0 X0 Y1 Y2 X3 , +1.0 Z1 X3 )
 +comm( +1.0 Y0 X1 X2 Y3 , +1.0 Z1 X3 )
 +comm( -1.0 X0 X1 Y2 Y3 , +1.0 Z1 X3 )
 +comm( -1.0 Y0 Y1 X2 X3 , +1.0 Z1 X3 )
 +comm( +1.0 Z0          , +1.0 Z1 X3 )
 +comm( +1.0 Z0 Z1       , +1.0 Z1 X3 )
 +comm( +1.0 Z0    Z2    , +1.0 Z1 X3 )
 +comm( +1.0 Z0       Z3 , +1.0 Z1 X3 )
 +comm( +1.0 Z1          , +1.0 Z1 X3 )
 +comm( +1.0 Z1    Z2    , +1.0 Z1 X3 )
 +comm( +1.0 Z1       Z3 , +1.0 Z1 X3 )
 +comm( -1.0 Z2          , +1.0 Z1 X3 )
 +comm( +1.0 Z2       Z3 , +1.0 Z1 X3 )
 +comm( -1.0 Z3          , +1.0 Z1 X3 )
</code></pre></div></td></tr></table></div>
<p>Now we can deal with each of these seperately instead of thinking how to deal with all terms simultaneously.</p>
<p>I call each term of AA as 'a', likewise each term of B as 'b'. Obviously there is only 1 'b' in this case, so 'b' stand for 1.0 [Z1 X3].</p>
<p>Look at the first term,</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>0)  comm( -1.0             , +1.0 Z1 X3 )
</code></pre></div></td></tr></table></div>
<p>There is no Pauli XYZ inside A. Why? It is actually a convention in most of the symbolic computation library that always ommiting the Pauli I Operator. Because you will always get the same thing when multiplying Pauli I to any Pauli XYZ. Hence, comm(a0, b) is no doubt commute.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>a0b - ba0 == 0  # by the fact that a0 is Pauli I
</code></pre></div></td></tr></table></div>
<p>But for any terms that contain things other than Pauli I, you need to check wether it is commute.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code>1)  comm( +1.0 X0 Y1 Y2 X3 , +1.0 Z1 X3 )

= comm( +1.0 X0 Y1 Y2 X3,
        +1.0    Z1    X3)

= comm( +1.0 Y1 X3  ,
        +1.0 Z1 X3  )   # focus on common index

= YZ XX - ZY XX  # lets use the clockwiseness techinque from previous section

## we can solely keep track of the first (left) clockwiseness
    Anticlockwise%2 ^ Clockwise%2
=   1 ^ 0
=   1   
= non commute
</code></pre></div></td></tr></table></div>
<p>One counter example is enough, so comm(AA, B) return False immediately.</p>
<h2 id="uniqueness-of-pauli-xyz">Uniqueness of Pauli XYZ<a class="headerlink" href="#uniqueness-of-pauli-xyz" title="Permanent link">&para;</a></h2>
<p>The most important notion about Pauli XYZ is that it form a cyclic group and thus maintain uniqueness. This uniqueness ensure that we can boradcase like above paragraph and reject commutativity immediately after one counter example found. Otherwise we must check for all pattern to see whether they are commute or not.</p>
<p>What if there did not exist uniquess?</p>
<p>Let say we got comm(AA, B). And currently comparing AA[i] and B[0].</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>comm( AA[i] , B[0] )
</code></pre></div></td></tr></table></div>
<p>When they commute, they cancel out.</p>
<p>But when they NOT commute, the remainder stay. What will then happen?</p>
<p>Remember that we are comparing AA and B. We scan from AA[0] to AA[n].</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code>If comm(AA[1], BB[0]) != 0

Since we multiplied AA[1] by BB[0],
this should form a new term that we don&#39;t know yet

comm(AA[1], B[0]) =&gt; something else let say 1 * R_1

Then we meet other commute pair

Let say comm(AA[2], B[0]) == 0
But this is just meaning that

comm(AA[2], B[0]) =&gt; something else let say 1 * R_2

What if there is another R_2 ?
What if R_1 is actually R_2 ?
So we cannot cancel out the Pauli Tensor from comm(AA[2], B[0]),
although comm(AA[2], B[0]) == 0

If this kind of thing can be happened,
then we must check for all terms to make sure the final remainder is zero,
then finally we can say AA and B is commute
</code></pre></div></td></tr></table></div>
<p>But we don't need to do that. Let me prove it.</p>
<p>Since Pauli XYZ is a cyclic group.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>  X
Z   Y
</code></pre></div></td></tr></table></div>
<p>Let say you got Y, multiplying X to results Z. You can do the same thing on the above triangle. Try draw a line from Y, passing X, you must reach Z.</p>
<p>Then you have a set of Pauli XYZ. Just think of many of those triangles all happening at once.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>B     [focus]
B0    ...

AA    [focus]         [outfo]
AA0   ...             ...
AA1   ...             ...
AA2   ...             ...
</code></pre></div></td></tr></table></div>
<p>Recall the section of <a href="#premise-terms-in-linear-combination-must-be-unique">Premise: terms in linear combination must be unique</a>.</p>
<p>Each Pauli XYZ inside AA is a unique permutation of Pauli Tensor.</p>
<p>For the outfo part, just assume that they are all having the same exactly one permutation. Even that, the focus part must all differ from each other within same set i.e. within AA. </p>
<p>Let say AA consist of 3 rows and they differ from each other in only one Pauli XYZ. And B[0] is Z</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code>    B   [focus]
    0   Z

    AA  [focus]         [outfo]
    0   X               ...
    1   Y               ...
    2   Z               ...

=   AAB [focus]         [outfo]
    0   XZ              ...
    1   YZ              ...
    2   ZZ              ...

=   AAB [focus]         [outfo]
    0   Y               ...
    1   X               ...
    2   I               ...
</code></pre></div></td></tr></table></div>
<p>Terms in AA are still differ from each other after multiplication. Because they are all multiplied by the same thing. Their relative distance after being multiplied still  remain unchanged.</p>
<p>Think of that XYZ triangle analogy. You got 3 of them now. And then you rotate them simultaneously by same unit. Their relative status do not change after all.</p>
<p>Like you multiply 3 to [1. 2. 3], they change to [3, 6, 9] and they still differ internally before and after.</p>
<p>Hence uniqueness of Pauli XYZ is ensured and we can safely do the broadcasting and cancel out comm(AA[i], B[0]) = 0 terms.</p>
<h2 id="code_1">Code<a class="headerlink" href="#code_1" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">commutator_special</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span>
<span class="normal"><a href="#__codelineno-3-29">29</a></span>
<span class="normal"><a href="#__codelineno-3-30">30</a></span>
<span class="normal"><a href="#__codelineno-3-31">31</a></span>
<span class="normal"><a href="#__codelineno-3-32">32</a></span>
<span class="normal"><a href="#__codelineno-3-33">33</a></span>
<span class="normal"><a href="#__codelineno-3-34">34</a></span>
<span class="normal"><a href="#__codelineno-3-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">def</span> <span class="nf">commutator_special</span><span class="p">(</span><span class="n">AA</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>    <span class="c1"># Only clockwiseness dictionary is needed</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>    <span class="n">lookup</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;XY&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>               <span class="s1">&#39;YX&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>               <span class="s1">&#39;XZ&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>               <span class="s1">&#39;ZX&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>               <span class="s1">&#39;YZ&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>               <span class="s1">&#39;ZY&#39;</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>    <span class="c1"># Hash the whole AA dict for faster checking</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a>    <span class="n">AA_Hashs</span> <span class="o">=</span> <span class="p">{</span> <span class="nb">hash</span><span class="p">((</span><span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="p">)):</span> <span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">AA</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">}</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a>    <span class="k">for</span> <span class="n">b_key</span><span class="p">,</span> <span class="n">b_cof</span> <span class="ow">in</span> <span class="n">B</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>  <span class="c1"># This loop has only one element</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a>        <span class="n">b_key</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b_key</span><span class="p">)</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a>        <span class="k">if</span> <span class="nb">hash</span><span class="p">(</span><span class="n">b_key</span><span class="p">)</span> <span class="ow">in</span> <span class="n">AA_Hashs</span><span class="p">:</span>  <span class="c1"># Self commute</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a>            <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a>        <span class="c1"># Only dict.values is enough. We don&#39;t need hash((key,val)) below</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a>        <span class="k">for</span> <span class="n">a_key</span><span class="p">,</span> <span class="n">a_cof</span> <span class="ow">in</span> <span class="n">AA</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>  
<a id="__codelineno-3-21" name="__codelineno-3-21"></a>            <span class="c1"># Extract common indices</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a>            <span class="n">intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">a_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a>            <span class="k">if</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a>                <span class="n">clw</span> <span class="o">=</span> <span class="n">aclw</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a>                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a>                    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a_key</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">b_key</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a>                    <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>  <span class="c1"># Skip XX YY ZZ</span>
<a id="__codelineno-3-28" name="__codelineno-3-28"></a>                        <span class="n">anticlock</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-3-29" name="__codelineno-3-29"></a>                        <span class="k">if</span> <span class="n">anticlock</span><span class="p">:</span>
<a id="__codelineno-3-30" name="__codelineno-3-30"></a>                            <span class="n">aclw</span> <span class="o">^=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-3-31" name="__codelineno-3-31"></a>                        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-3-32" name="__codelineno-3-32"></a>                            <span class="n">clw</span> <span class="o">^=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-3-33" name="__codelineno-3-33"></a>                <span class="k">if</span> <span class="n">aclw</span> <span class="o">^</span> <span class="n">clw</span> <span class="p">:</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-3-34" name="__codelineno-3-34"></a>                    <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-3-35" name="__codelineno-3-35"></a>    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
<h1 id="general-commutativity">General Commutativity<a class="headerlink" href="#general-commutativity" title="Permanent link">&para;</a></h1>
<p>We have already seen comm(one, one) and comm(many, one), how about comm(many, many) denoted as comm(AA, BB) ? Is that difficult?</p>
<p>Yes it is not an easy job to think about it. But don't worry, because I solved it for you already.</p>
<h2 id="cartesian-product">Cartesian Product<a class="headerlink" href="#cartesian-product" title="Permanent link">&para;</a></h2>
<p>To do comm(AA, BB), we need to broadcase everything in BB to everything in AA. And this is simplily the case of Cartesian Product.</p>
<p>You can write some simple code to see what it is.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">AA</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="n">BB</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="k">for</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="n">AA</span><span class="p">,</span> <span class="n">BB</span><span class="p">):</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="c1"># 0 0</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="c1"># 0 1</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="c1"># 0 2</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="c1"># 0 3</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="c1"># 1 0</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="c1"># 1 1</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="c1"># ...</span>
</code></pre></div></td></tr></table></div>
<p>So if we are to check whether AA and BB commute, we have to check for all combination in the worst case. This can be super computational intense if you do this straight. And some guy do carry the whole calculation of AABB - BBAA, namely, carry out the multiplication of AABB and BBAA seperately then subtract them. This is just a waste of time since we have already discovered everything from the symmetry of Pauli XYZ and being able to ignore so many maniplulations and still obtain the result.</p>
<p>Just note that you can see that from the Cartesian Product, 01 and 10, or things like this can be happened. The mirror image of the same thing. The number is originally denoted as the index of AA and BB. But what if, what if those {0,1,2,3,...} stands for some unique Pauli XYZ sequence? We can see that this may indicate a exact concern among the symmetry.</p>
<h2 id="degerenate-uniqueness">Degerenate uniqueness<a class="headerlink" href="#degerenate-uniqueness" title="Permanent link">&para;</a></h2>
<p>Last section I proved the uniquness of Pauli XYZ within a linear combination. This however, do not work in the general case which is comm(many, many) i.e. comm(AA, BB).</p>
<p>Things are unique inside AA. Things also unique inside BB. But the point is the same thing can be possessed by AA and BB at the same time.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>    [AA]            [BB]
0   ...             ...
1   ...             ...
2   Z0 X1 X2        ...
3   ...             ...
4   ...             Z0 X1 X2
5   ...             Z0 Z1
6   ...             ...
7   Z0 Z1           ...
8   ...             ...
9   ...             ...
</code></pre></div></td></tr></table></div>
<p>Let recall the Cartestian Product.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code>    a b
    0 0
    0 1
    0 2
    0 3
    1 0
    1 1
    ...

fist we need to compute

    comm(0, 0)  # self commute
+   comm(0, 1)
+   comm(0, 2)
+   comm(0, 3)
+   comm(1, 0)
+   comm(1, 1)  # self commute
+   comm(1, 2)
+   comm(1, 3)
+    ...

we can already cancel some of them by the law of self commute

    comm(0, 1)  # ?
+   comm(0, 2)
+   comm(0, 3)
+   comm(1, 0)  # ?
+   comm(1, 2)
+   comm(1, 3)
...

then we see some interesting pairs

    comm(0, 1)
+   comm(1, 0)

what is their relationship?
</code></pre></div></td></tr></table></div>
<p>So, a pair of couple 0 and 1. Just differed by the ordering. But what are they actually?</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code>since comm(a, b) = ab - ba0

comm(0, 1) = 01 - 10
comm(1, 0) = 10 - 01 = -(01 - 10)  # Oops

sum it !

    comm(0, 1) + comm(1, 0)
=   (01 - 10) + -(01 - 10)
=   0  # This commute,

but if and only if the coefficient of left0 and right0 is the exactly same thing
if not, it will be like

    0.5*(01 - 10) + -0.3*(01 - 10)
=   0.2*(01 - 10) =&gt; NON commute
</code></pre></div></td></tr></table></div>
<p>So they added up. This is not happened in the previous section in Special Commutativity.</p>
<p>In fact this kind of order-reverted commutativity is well known. From this result, we can see that if the exactly same pair is pocessesed by both AA and BB, then we automatically know this pair commute.</p>
<p><div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>if a in BB and b in BB:  # commute!
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>    continue   # Not even bother to check the clockwiseness
</code></pre></div></td></tr></table></div>
    like finding the overlaping part of two set</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>                  /---------\
        /-------\/           \
       /        /\            |
      |        |!!|           |
       \        \/           /
        \_______/ \_________/
</code></pre></div></td></tr></table></div>
<p>But for others, not sure. You have to check for their clockwiseness.</p>
<p>And since the uniqueness is degenerated in general case, we cannot return False just because one pair is non commute.</p>
<p>For example</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>comm( [Z0 X1 Y2 X3] , [Y1 X2 Y3] )
= 2j [Z0 Z1 Z2 Z3]


comm( [Y0 Z1 Z2 Z3] , [X0] )
= -2j [Z0 Z1 Z2 Z3]

Both pair do not commute internally,
but the outcome is exactly same and coeficients add up to zero,
then annihilate
</code></pre></div></td></tr></table></div>
<h2 id="code_2">Code<a class="headerlink" href="#code_2" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">commutator_general</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span>
<span class="normal"><a href="#__codelineno-6-28">28</a></span>
<span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span>
<span class="normal"><a href="#__codelineno-6-31">31</a></span>
<span class="normal"><a href="#__codelineno-6-32">32</a></span>
<span class="normal"><a href="#__codelineno-6-33">33</a></span>
<span class="normal"><a href="#__codelineno-6-34">34</a></span>
<span class="normal"><a href="#__codelineno-6-35">35</a></span>
<span class="normal"><a href="#__codelineno-6-36">36</a></span>
<span class="normal"><a href="#__codelineno-6-37">37</a></span>
<span class="normal"><a href="#__codelineno-6-38">38</a></span>
<span class="normal"><a href="#__codelineno-6-39">39</a></span>
<span class="normal"><a href="#__codelineno-6-40">40</a></span>
<span class="normal"><a href="#__codelineno-6-41">41</a></span>
<span class="normal"><a href="#__codelineno-6-42">42</a></span>
<span class="normal"><a href="#__codelineno-6-43">43</a></span>
<span class="normal"><a href="#__codelineno-6-44">44</a></span>
<span class="normal"><a href="#__codelineno-6-45">45</a></span>
<span class="normal"><a href="#__codelineno-6-46">46</a></span>
<span class="normal"><a href="#__codelineno-6-47">47</a></span>
<span class="normal"><a href="#__codelineno-6-48">48</a></span>
<span class="normal"><a href="#__codelineno-6-49">49</a></span>
<span class="normal"><a href="#__codelineno-6-50">50</a></span>
<span class="normal"><a href="#__codelineno-6-51">51</a></span>
<span class="normal"><a href="#__codelineno-6-52">52</a></span>
<span class="normal"><a href="#__codelineno-6-53">53</a></span>
<span class="normal"><a href="#__codelineno-6-54">54</a></span>
<span class="normal"><a href="#__codelineno-6-55">55</a></span>
<span class="normal"><a href="#__codelineno-6-56">56</a></span>
<span class="normal"><a href="#__codelineno-6-57">57</a></span>
<span class="normal"><a href="#__codelineno-6-58">58</a></span>
<span class="normal"><a href="#__codelineno-6-59">59</a></span>
<span class="normal"><a href="#__codelineno-6-60">60</a></span>
<span class="normal"><a href="#__codelineno-6-61">61</a></span>
<span class="normal"><a href="#__codelineno-6-62">62</a></span>
<span class="normal"><a href="#__codelineno-6-63">63</a></span>
<span class="normal"><a href="#__codelineno-6-64">64</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">def</span> <span class="nf">commutator_general</span><span class="p">(</span><span class="n">AA</span><span class="p">,</span> <span class="n">BB</span><span class="p">):</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>    <span class="c1"># Only clockwiseness dictionary is needed</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>    <span class="n">lookup</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;XY&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>               <span class="s1">&#39;YX&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>               <span class="s1">&#39;XZ&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a>               <span class="s1">&#39;ZX&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a>               <span class="s1">&#39;YZ&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a>               <span class="s1">&#39;ZY&#39;</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a>    <span class="c1"># Hash for faster checking</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a>    <span class="c1"># Prepare both because we are to check for set relation</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a>    <span class="n">AA_Hashs</span> <span class="o">=</span> <span class="p">{</span> <span class="nb">hash</span><span class="p">((</span><span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="p">)):(</span><span class="nb">dict</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">AA</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">}</span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a>    <span class="n">BB_Hashs</span> <span class="o">=</span> <span class="p">{</span> <span class="nb">hash</span><span class="p">((</span><span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="p">)):(</span><span class="nb">dict</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">AA</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">}</span>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a>    <span class="c1"># Prepare a set for faster checking</span>
<a id="__codelineno-6-16" name="__codelineno-6-16"></a>    <span class="n">common_terms</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">A_hashs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">B_hashs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a>
<a id="__codelineno-6-18" name="__codelineno-6-18"></a>    <span class="k">for</span> <span class="n">a_hash</span><span class="p">,</span> <span class="p">(</span><span class="n">a_key</span><span class="p">,</span> <span class="n">a_cof</span><span class="p">)</span> <span class="ow">in</span> <span class="n">AA</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>  <span class="c1"># This loop has many element</span>
<a id="__codelineno-6-19" name="__codelineno-6-19"></a>        <span class="n">a_key</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a_key</span><span class="p">)</span>
<a id="__codelineno-6-20" name="__codelineno-6-20"></a>        <span class="k">if</span> <span class="n">a_hash</span> <span class="ow">in</span> <span class="n">common_terms</span><span class="p">:</span>
<a id="__codelineno-6-21" name="__codelineno-6-21"></a>            <span class="k">for</span> <span class="n">b_hash</span><span class="p">,</span> <span class="p">(</span><span class="n">b_key</span><span class="p">,</span> <span class="n">b_cof</span><span class="p">)</span> <span class="ow">in</span> <span class="n">BB</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-6-22" name="__codelineno-6-22"></a>                <span class="k">if</span> <span class="n">b_hash</span> <span class="ow">in</span> <span class="n">common_terms</span><span class="p">:</span>  <span class="c1">#  Skip for this intersection pairs</span>
<a id="__codelineno-6-23" name="__codelineno-6-23"></a>                    <span class="k">continue</span>
<a id="__codelineno-6-24" name="__codelineno-6-24"></a>                <span class="c1"># Extract common indices</span>
<a id="__codelineno-6-25" name="__codelineno-6-25"></a>                <span class="n">intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">a_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-6-26" name="__codelineno-6-26"></a>                <span class="k">if</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-6-27" name="__codelineno-6-27"></a>                    <span class="n">clw</span> <span class="o">=</span> <span class="n">aclw</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-6-28" name="__codelineno-6-28"></a>                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-6-29" name="__codelineno-6-29"></a>                        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a_key</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">b_key</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-6-30" name="__codelineno-6-30"></a>                        <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>  <span class="c1"># Skip XX YY ZZ</span>
<a id="__codelineno-6-31" name="__codelineno-6-31"></a>                            <span class="n">anticlock</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-6-32" name="__codelineno-6-32"></a>                            <span class="k">if</span> <span class="n">anticlock</span><span class="p">:</span>
<a id="__codelineno-6-33" name="__codelineno-6-33"></a>                                <span class="n">aclw</span> <span class="o">^=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-6-34" name="__codelineno-6-34"></a>                            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-6-35" name="__codelineno-6-35"></a>                                <span class="n">clw</span> <span class="o">^=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-6-36" name="__codelineno-6-36"></a>                    <span class="k">if</span> <span class="n">clw</span> <span class="o">^</span> <span class="n">aclw</span> <span class="p">:</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-6-37" name="__codelineno-6-37"></a>                        <span class="c1">###########################################</span>
<a id="__codelineno-6-38" name="__codelineno-6-38"></a>                        <span class="c1">#   We need to evaluate the result here!  #</span>
<a id="__codelineno-6-39" name="__codelineno-6-39"></a>                        <span class="c1">#   Since we uniqueness is not exist in   #</span>
<a id="__codelineno-6-40" name="__codelineno-6-40"></a>                        <span class="c1">#   general case !!!                      #</span>
<a id="__codelineno-6-41" name="__codelineno-6-41"></a>                        <span class="c1">###########################################</span>
<a id="__codelineno-6-42" name="__codelineno-6-42"></a>        <span class="k">else</span><span class="p">:</span> <span class="c1"># Seperate code to eliminate unnecessary $if b_hash in common_terms$ checking</span>
<a id="__codelineno-6-43" name="__codelineno-6-43"></a>            <span class="c1">######### Same code from above ###########</span>
<a id="__codelineno-6-44" name="__codelineno-6-44"></a>            <span class="k">for</span> <span class="n">b_key</span><span class="p">,</span> <span class="n">b_cof</span> <span class="ow">in</span> <span class="n">BB</span><span class="o">.</span><span class="n">values</span><span class="p">():</span> <span class="c1"># Only values is enough. We don&#39;t need hash(key) below</span>
<a id="__codelineno-6-45" name="__codelineno-6-45"></a>                <span class="n">intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">a_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-6-46" name="__codelineno-6-46"></a>                <span class="k">if</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-6-47" name="__codelineno-6-47"></a>                    <span class="n">clw</span> <span class="o">=</span> <span class="n">aclw</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-6-48" name="__codelineno-6-48"></a>                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-6-49" name="__codelineno-6-49"></a>                        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a_key</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">b_key</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-6-50" name="__codelineno-6-50"></a>                        <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>  <span class="c1"># Skip XX YY ZZ</span>
<a id="__codelineno-6-51" name="__codelineno-6-51"></a>                            <span class="n">anticlock</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-6-52" name="__codelineno-6-52"></a>                            <span class="k">if</span> <span class="n">anticlock</span><span class="p">:</span>
<a id="__codelineno-6-53" name="__codelineno-6-53"></a>                                <span class="n">aclw</span> <span class="o">^=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-6-54" name="__codelineno-6-54"></a>                            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-6-55" name="__codelineno-6-55"></a>                                <span class="n">clw</span> <span class="o">^=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-6-56" name="__codelineno-6-56"></a>                    <span class="k">if</span> <span class="n">clw</span> <span class="o">^</span> <span class="n">aclw</span> <span class="p">:</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-6-57" name="__codelineno-6-57"></a>                        <span class="c1">###########################################</span>
<a id="__codelineno-6-58" name="__codelineno-6-58"></a>                        <span class="c1">#   We need to evaluate the result here!  #</span>
<a id="__codelineno-6-59" name="__codelineno-6-59"></a>                        <span class="c1">#   Since we uniqueness is not exist in   #</span>
<a id="__codelineno-6-60" name="__codelineno-6-60"></a>                        <span class="c1">#   general case !!!                      #</span>
<a id="__codelineno-6-61" name="__codelineno-6-61"></a>                        <span class="c1">###########################################</span>
<a id="__codelineno-6-62" name="__codelineno-6-62"></a>    <span class="c1">###########################################</span>
<a id="__codelineno-6-63" name="__codelineno-6-63"></a>    <span class="c1">#   Now check if the end result is zero   #</span>
<a id="__codelineno-6-64" name="__codelineno-6-64"></a>    <span class="c1">###########################################</span>
</code></pre></div></td></tr></table></div>
<h1 id="normal-commutator">Normal Commutator<a class="headerlink" href="#normal-commutator" title="Permanent link">&para;</a></h1>
<p>So, I said from the begining that commutator is a function which</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>commutator = AB - BA
</code></pre></div></td></tr></table></div>
<p>If thing do not commute, AB - BA != 0, there is remainder. Sometimes people want the remainder more than commutativity.</p>
<p>And I got you.</p>
<p>So, we have been avoid calculating the coefficient of NON commute outcome. Because, from the textbook or from the first section, people knew that there is only two result from NON commute prduct.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code>    Clockwise =&gt;  1j
Anticlockwise =&gt; -1j

    XY - YX
=   Clockwise - Anticlockwise
=   1j - (-1j)
=   2j

    ZY - YZ
=   Anticlockwise - Clockwise
=   -1j - 1j
=   -2j
</code></pre></div></td></tr></table></div>
<p>This is simple, because we only do this on one single Pauli XYZ, that is why they only post this on textbook.</p>
<p>What happen if we got a Tensor Product of Pauli XYZ?</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>Clockwise * Clockwise * Anticlockwise * Anticlockwise ... =&gt;  ?
Anticlockwise * Anticlockwise * Clockwise * Clockwise ... =&gt; -?
</code></pre></div></td></tr></table></div>
<p>Of course you can do it straight. I won't stop you.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>=&gt;  1j * 1j * -1j * -1j * 1j * ...
</code></pre></div></td></tr></table></div>
<p>Seems endless multiplication.</p>
<p>Recalling from the first setion, we got this equation. Maybe this can help us.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>ca and cb stand for coefficient of a and b

coefficient when non commute
=   (ca * cb) * [(-1)**(Anticlockwise) * (1j)**(Clockwise + Anticlockwise) - (-1)**(Clockwise) * (1j)**(Clockwise + Anticlockwise)]
</code></pre></div></td></tr></table></div>
<p>Too long. Just call Clockwise 'clw' and Anticlockwise 'aclw'.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>(ca * cb) * [(-1)**(aclw) * (1j)**(clw + aclw) - (-1)**(clw) * (1j)**(clw + aclw)]
</code></pre></div></td></tr></table></div>
<p>The problem is the big thing behind (ca * cb) . Its value depends on count of clw and aclw.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code>(-1)**(aclw) * (1j)**(clw + aclw) - (-1)**(clw) * (1j)**(clw + aclw)
= (1j)**(clw + aclw) * [(-1)**(aclw) - (-1)**(clw)] =&gt; eq.0

Commute means that coefficient equals zero.
this can happen if and only if the right part equal zero

0 = (1j)**(clw + aclw) * [(-1)**(aclw) - (-1)**(clw)]
=&gt; [(-1)**(aclw) - (-1)**(clw)] == zero

This is just adding and subtracting, 
it can be zero

But what is exponential of -1 ?

   (-1)**0 =  1
   (-1)**1 = -1
   (-1)**2 =  1
   (-1)**3 = -1
   (-1)**4 =  1
    ...

we can just count the parity clw and aclw for this part

But what is then (1j)**(clw + aclw) ?

    1j** 0 =  1
    1j** 1 =  1j
    1j** 2 = -1
    1j** 3 = -1j
    1j** 4 =  1
    1j** 5 =  1j
    ...

There is -1 inside !
The left part is entangled with the right part !!!!!
</code></pre></div></td></tr></table></div>
<p>This is complicated. -1 and j are not independent from each other. This cannot be solved trivially.</p>
<p>We have two data, namely, number of clockwise and anticlock. Let see what we can do with them.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code>eq.0    (1j)**(clw + aclw) * [(-1)**(aclw) - (-1)**(clw)]

Since this eq.0 only depend on clw and aclw,
we should see what input value leads to what outcome

When NON commute, clw and aclw has different parity,
this can be checked by

    aclw%2  clw%2

    Let substitute some real number
    (-1)**(0) - (-1)^(1) ==  +1 - (-1) ==  2
    (-1)**(1) - (-1)^(0) ==  -1 -  +1  == -2

Now we know either 2 or -2 can be the answer of this part
okay, it seems like we can predict the sign of outcome

    aclw%2  clw%2   
        0       1   =&gt;  positive
        1       0   =&gt;  negative

    Neither 0+1 or 1+0 can be negative to distinguish.
    Why not try 0-1 or 1-0?

        0 - 1 == -1

    So (aclw%2 - clw%2) is the answer for the sign

we successfully connect the parity of clw and aclw to negative sign

And 1j exponential has a cycle of 4,
so the value of 1j part depend on

        (clw + aclw)%4
    or (clw%4 + aclw%4)
    or (clw%4 + aclw%4)%4

But clw and aclw cannot have same parity,
otherwise they are comute and cancel out.
No even+even or odd+odd
Only even+odd =&gt; odd

    clw + aclw can only be 1 and 3
        1j** 1 =  1j
        1j** 3 = -1j

So this is a math question of,
what number satisfy the following two equation

    eq.1  aclw%2 - clw%2 == 1 or -1
    eq.2  (clw%4 + aclw%4) == 1 or 3

Summing eq.1 and eq.2 will get this

    eq.1.+eq.2  (aclw%2-clw%2) + (clw%4+aclw%4) == ?

Recall that {1,-1} from eq.1 is the indicator for { 2,-2 }
        and {1, 3} from eq.2 is the indicator for {1j,-1j}

We can do carry out the calculation of the original eq.0 and eq.1 eq.2
to see there is indeed a isomorphism between these equations

        [eq.1]  [eq.2]   [result]       [eq.0L]  [eq.0R]  [result]

        SUM        /----&gt; (2)            MULTIPLY  /----&gt; (-2j)
                  /                               /
        (-1)-----(1)----&gt; (0)            (2)-----(j)----&gt; (2j)
             \  /                            \  /
              \/                              \/
              /\                              /\
             /  \                            /  \
         (1)-----(3)----&gt; (4)           (-2)----(-j)----&gt; (2j)
                  \                               \
                   \----&gt; (2)                      \----&gt; (-2j)

So  {0,4} from eq.1.+eq.2 maps to ( 2j)
    {  2} from eq.1.+eq.2 maps to (-2j)

In fact 4 == 0 (mod 4), so for a module4 system
    {0} from eq.1.+eq.2 maps to ( 2j)
    {2} from eq.1.+eq.2 maps to (-2j)

Hence we know that
    coefficient ==  2j iff (eq.1.+eq.2)%4 == 0
                == -2j iff (eq.1.+eq.2)%4 == 2

 _______________________________________________________________________________________________
|  clw  aclw   original equation   a=clw%2-aclw%2   b=(clw%4+aclw%4)%4   (a+b)%4  finalresult  |
|______________________________________________________________________________________________|
|   0   1       -2 *       1j          1                  1               2      (-0-2j)       |
|   0   3       -2 *  (-0-1j)          1                  3               0           2j       |
|   1   0        2 *       1j         -1                  1               0           2j       |
|   1   2        2 *  (-0-1j)         -1                  3               2          -2j       |
|   2   1       -2 *  (-0-1j)          1                  3               0           2j       |
|   2   3       -2 *       1j          1                  1               2      (-0-2j)       |
|   3   0        2 *  (-0-1j)         -1                  3               2          -2j       |
|   3   2        2 *       1j         -1                  1               0           2j       |
|______________________________________________________________________________________________|

((aclw%2 - clw%2) + (clw%4 + aclw%4)%4)%4 =  {(2, -2j), (0, 2j)}

since -1 has order of cycle == 2, 
and 1j has order of cycle ==4, 
check until n=4 is enough for revealing all pattern.
</code></pre></div></td></tr></table></div>
<p>Now can now use this magic equation to answer the question. Instead of multiplying the long sequencence of 1j and -1j, we count the number of clockwise and anticlockwise, then we know everything.</p>
<p>Since {2j, -2j} is the only set of result, we can factorize 2j and multiply it back at the end of the function.</p>
<h2 id="code_3">Code<a class="headerlink" href="#code_3" title="Permanent link">&para;</a></h2>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">commutator_normal</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span>
<span class="normal"><a href="#__codelineno-7-19">19</a></span>
<span class="normal"><a href="#__codelineno-7-20">20</a></span>
<span class="normal"><a href="#__codelineno-7-21">21</a></span>
<span class="normal"><a href="#__codelineno-7-22">22</a></span>
<span class="normal"><a href="#__codelineno-7-23">23</a></span>
<span class="normal"><a href="#__codelineno-7-24">24</a></span>
<span class="normal"><a href="#__codelineno-7-25">25</a></span>
<span class="normal"><a href="#__codelineno-7-26">26</a></span>
<span class="normal"><a href="#__codelineno-7-27">27</a></span>
<span class="normal"><a href="#__codelineno-7-28">28</a></span>
<span class="normal"><a href="#__codelineno-7-29">29</a></span>
<span class="normal"><a href="#__codelineno-7-30">30</a></span>
<span class="normal"><a href="#__codelineno-7-31">31</a></span>
<span class="normal"><a href="#__codelineno-7-32">32</a></span>
<span class="normal"><a href="#__codelineno-7-33">33</a></span>
<span class="normal"><a href="#__codelineno-7-34">34</a></span>
<span class="normal"><a href="#__codelineno-7-35">35</a></span>
<span class="normal"><a href="#__codelineno-7-36">36</a></span>
<span class="normal"><a href="#__codelineno-7-37">37</a></span>
<span class="normal"><a href="#__codelineno-7-38">38</a></span>
<span class="normal"><a href="#__codelineno-7-39">39</a></span>
<span class="normal"><a href="#__codelineno-7-40">40</a></span>
<span class="normal"><a href="#__codelineno-7-41">41</a></span>
<span class="normal"><a href="#__codelineno-7-42">42</a></span>
<span class="normal"><a href="#__codelineno-7-43">43</a></span>
<span class="normal"><a href="#__codelineno-7-44">44</a></span>
<span class="normal"><a href="#__codelineno-7-45">45</a></span>
<span class="normal"><a href="#__codelineno-7-46">46</a></span>
<span class="normal"><a href="#__codelineno-7-47">47</a></span>
<span class="normal"><a href="#__codelineno-7-48">48</a></span>
<span class="normal"><a href="#__codelineno-7-49">49</a></span>
<span class="normal"><a href="#__codelineno-7-50">50</a></span>
<span class="normal"><a href="#__codelineno-7-51">51</a></span>
<span class="normal"><a href="#__codelineno-7-52">52</a></span>
<span class="normal"><a href="#__codelineno-7-53">53</a></span>
<span class="normal"><a href="#__codelineno-7-54">54</a></span>
<span class="normal"><a href="#__codelineno-7-55">55</a></span>
<span class="normal"><a href="#__codelineno-7-56">56</a></span>
<span class="normal"><a href="#__codelineno-7-57">57</a></span>
<span class="normal"><a href="#__codelineno-7-58">58</a></span>
<span class="normal"><a href="#__codelineno-7-59">59</a></span>
<span class="normal"><a href="#__codelineno-7-60">60</a></span>
<span class="normal"><a href="#__codelineno-7-61">61</a></span>
<span class="normal"><a href="#__codelineno-7-62">62</a></span>
<span class="normal"><a href="#__codelineno-7-63">63</a></span>
<span class="normal"><a href="#__codelineno-7-64">64</a></span>
<span class="normal"><a href="#__codelineno-7-65">65</a></span>
<span class="normal"><a href="#__codelineno-7-66">66</a></span>
<span class="normal"><a href="#__codelineno-7-67">67</a></span>
<span class="normal"><a href="#__codelineno-7-68">68</a></span>
<span class="normal"><a href="#__codelineno-7-69">69</a></span>
<span class="normal"><a href="#__codelineno-7-70">70</a></span>
<span class="normal"><a href="#__codelineno-7-71">71</a></span>
<span class="normal"><a href="#__codelineno-7-72">72</a></span>
<span class="normal"><a href="#__codelineno-7-73">73</a></span>
<span class="normal"><a href="#__codelineno-7-74">74</a></span>
<span class="normal"><a href="#__codelineno-7-75">75</a></span>
<span class="normal"><a href="#__codelineno-7-76">76</a></span>
<span class="normal"><a href="#__codelineno-7-77">77</a></span>
<span class="normal"><a href="#__codelineno-7-78">78</a></span>
<span class="normal"><a href="#__codelineno-7-79">79</a></span>
<span class="normal"><a href="#__codelineno-7-80">80</a></span>
<span class="normal"><a href="#__codelineno-7-81">81</a></span>
<span class="normal"><a href="#__codelineno-7-82">82</a></span>
<span class="normal"><a href="#__codelineno-7-83">83</a></span>
<span class="normal"><a href="#__codelineno-7-84">84</a></span>
<span class="normal"><a href="#__codelineno-7-85">85</a></span>
<span class="normal"><a href="#__codelineno-7-86">86</a></span>
<span class="normal"><a href="#__codelineno-7-87">87</a></span>
<span class="normal"><a href="#__codelineno-7-88">88</a></span>
<span class="normal"><a href="#__codelineno-7-89">89</a></span>
<span class="normal"><a href="#__codelineno-7-90">90</a></span>
<span class="normal"><a href="#__codelineno-7-91">91</a></span>
<span class="normal"><a href="#__codelineno-7-92">92</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="k">def</span> <span class="nf">normal_commutator</span><span class="p">(</span><span class="n">AA</span><span class="p">,</span> <span class="n">BB</span><span class="p">):</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>    <span class="c1"># Dictionary is needed</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>    <span class="n">lookup</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;XY&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a>               <span class="s1">&#39;YX&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>               <span class="s1">&#39;XZ&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>               <span class="s1">&#39;ZX&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a>               <span class="s1">&#39;YZ&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a>               <span class="s1">&#39;ZY&#39;</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a>    <span class="n">lookup_xyz</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;XY&#39;</span><span class="p">:</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a>                   <span class="s1">&#39;YX&#39;</span><span class="p">:</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a>                   <span class="s1">&#39;XZ&#39;</span><span class="p">:</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a>                   <span class="s1">&#39;ZX&#39;</span><span class="p">:</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a>                   <span class="s1">&#39;YZ&#39;</span><span class="p">:</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a>                   <span class="s1">&#39;ZY&#39;</span><span class="p">:</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a>                   <span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span>
<a id="__codelineno-7-18" name="__codelineno-7-18"></a>                   <span class="s1">&#39;Y&#39;</span><span class="p">:</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
<a id="__codelineno-7-19" name="__codelineno-7-19"></a>                   <span class="s1">&#39;Z&#39;</span><span class="p">:</span> <span class="s1">&#39;Z&#39;</span> <span class="p">}</span>
<a id="__codelineno-7-20" name="__codelineno-7-20"></a>
<a id="__codelineno-7-21" name="__codelineno-7-21"></a>    <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<a id="__codelineno-7-22" name="__codelineno-7-22"></a>    <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
<a id="__codelineno-7-23" name="__codelineno-7-23"></a>
<a id="__codelineno-7-24" name="__codelineno-7-24"></a>    <span class="n">new</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<a id="__codelineno-7-25" name="__codelineno-7-25"></a>
<a id="__codelineno-7-26" name="__codelineno-7-26"></a>    <span class="c1"># Hash for faster checking</span>
<a id="__codelineno-7-27" name="__codelineno-7-27"></a>    <span class="c1"># Prepare both because we are to check for set relation</span>
<a id="__codelineno-7-28" name="__codelineno-7-28"></a>    <span class="n">AA_Hashs</span> <span class="o">=</span> <span class="p">{</span> <span class="nb">hash</span><span class="p">((</span><span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="p">)):(</span><span class="nb">dict</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">AA</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">}</span>
<a id="__codelineno-7-29" name="__codelineno-7-29"></a>    <span class="n">BB_Hashs</span> <span class="o">=</span> <span class="p">{</span> <span class="nb">hash</span><span class="p">((</span><span class="n">key</span><span class="p">,</span><span class="n">val</span><span class="p">)):(</span><span class="nb">dict</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">AA</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">}</span>
<a id="__codelineno-7-30" name="__codelineno-7-30"></a>
<a id="__codelineno-7-31" name="__codelineno-7-31"></a>    <span class="c1"># Prepare a set for faster checking</span>
<a id="__codelineno-7-32" name="__codelineno-7-32"></a>    <span class="n">common_terms</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">A_hashs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">B_hashs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-7-33" name="__codelineno-7-33"></a>
<a id="__codelineno-7-34" name="__codelineno-7-34"></a>    <span class="k">for</span> <span class="n">a_hash</span><span class="p">,</span> <span class="p">(</span><span class="n">a_key</span><span class="p">,</span> <span class="n">a_cof</span><span class="p">)</span> <span class="ow">in</span> <span class="n">AA</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>  <span class="c1"># This loop has many element</span>
<a id="__codelineno-7-35" name="__codelineno-7-35"></a>        <span class="n">a_key</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a_key</span><span class="p">)</span>
<a id="__codelineno-7-36" name="__codelineno-7-36"></a>        <span class="k">if</span> <span class="n">a_hash</span> <span class="ow">in</span> <span class="n">common_terms</span><span class="p">:</span>
<a id="__codelineno-7-37" name="__codelineno-7-37"></a>            <span class="k">for</span> <span class="n">b_hash</span><span class="p">,</span> <span class="p">(</span><span class="n">b_key</span><span class="p">,</span> <span class="n">b_cof</span><span class="p">)</span> <span class="ow">in</span> <span class="n">BB</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-7-38" name="__codelineno-7-38"></a>                <span class="k">if</span> <span class="n">b_hash</span> <span class="ow">in</span> <span class="n">common_terms</span><span class="p">:</span>  <span class="c1">#  Skip for this intersection pairs</span>
<a id="__codelineno-7-39" name="__codelineno-7-39"></a>                    <span class="k">continue</span>
<a id="__codelineno-7-40" name="__codelineno-7-40"></a>
<a id="__codelineno-7-41" name="__codelineno-7-41"></a>                <span class="c1"># Extract common indices</span>
<a id="__codelineno-7-42" name="__codelineno-7-42"></a>                <span class="n">intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">a_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-7-43" name="__codelineno-7-43"></a>                <span class="k">if</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-7-44" name="__codelineno-7-44"></a>                    <span class="n">new_key</span> <span class="o">=</span> <span class="n">a_key</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-7-45" name="__codelineno-7-45"></a>                    <span class="n">new_key</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">b_key</span><span class="p">)</span>
<a id="__codelineno-7-46" name="__codelineno-7-46"></a>                    <span class="n">clw</span> <span class="o">=</span> <span class="n">aclw</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-7-47" name="__codelineno-7-47"></a>                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-7-48" name="__codelineno-7-48"></a>                        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a_key</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">b_key</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-7-49" name="__codelineno-7-49"></a>                        <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>  <span class="c1"># Skip XX YY ZZ</span>
<a id="__codelineno-7-50" name="__codelineno-7-50"></a>                            <span class="n">anticlock</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-7-51" name="__codelineno-7-51"></a>                            <span class="n">new_key</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">lookup_xyz</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-7-52" name="__codelineno-7-52"></a>                            <span class="k">if</span> <span class="n">anticlock</span><span class="p">:</span>
<a id="__codelineno-7-53" name="__codelineno-7-53"></a>                                <span class="n">aclw</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-7-54" name="__codelineno-7-54"></a>                            <span class="k">else</span><span class="p">:</span> <span class="n">clw</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-7-55" name="__codelineno-7-55"></a>                        <span class="k">else</span><span class="p">:</span> <span class="n">new_key</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-7-56" name="__codelineno-7-56"></a>                    <span class="k">if</span> <span class="n">clw</span><span class="o">%</span><span class="mi">2</span> <span class="o">^</span> <span class="n">aclw</span><span class="o">%</span><span class="mi">2</span> <span class="p">:</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-7-57" name="__codelineno-7-57"></a>                        <span class="n">new_key</span> <span class="o">=</span> <span class="p">((</span><span class="n">bit</span><span class="p">,</span><span class="n">xyz</span><span class="p">)</span> <span class="k">for</span> <span class="n">bit</span><span class="p">,</span><span class="n">xyz</span> <span class="ow">in</span> <span class="n">new_key</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">xyz</span><span class="p">)</span>
<a id="__codelineno-7-58" name="__codelineno-7-58"></a>                        <span class="n">new_key</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">new_key</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
<a id="__codelineno-7-59" name="__codelineno-7-59"></a>                        <span class="n">new</span><span class="p">[</span><span class="n">new_key</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
<a id="__codelineno-7-60" name="__codelineno-7-60"></a>                            <span class="o">-</span><span class="n">a_cof</span> <span class="o">*</span> <span class="n">b_cof</span> 
<a id="__codelineno-7-61" name="__codelineno-7-61"></a>                            <span class="k">if</span> <span class="p">((</span><span class="n">aclw</span><span class="o">%</span><span class="mi">2</span><span class="o">-</span><span class="n">clw</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">clw</span><span class="o">%</span><span class="mi">4</span><span class="o">+</span><span class="n">aclw</span><span class="o">%</span><span class="mi">4</span><span class="p">)</span><span class="o">%</span><span class="mi">4</span><span class="p">)</span><span class="o">%</span><span class="mi">4</span> <span class="k">else</span>
<a id="__codelineno-7-62" name="__codelineno-7-62"></a>                            <span class="o">+</span><span class="n">a_cof</span> <span class="o">*</span> <span class="n">b_cof</span><span class="p">)</span>
<a id="__codelineno-7-63" name="__codelineno-7-63"></a>
<a id="__codelineno-7-64" name="__codelineno-7-64"></a>        <span class="k">else</span><span class="p">:</span> <span class="c1"># Seperate code to eliminate unnecessary $if b_hash in common_terms$ checking</span>
<a id="__codelineno-7-65" name="__codelineno-7-65"></a>            <span class="c1">######### Same code from above ###########</span>
<a id="__codelineno-7-66" name="__codelineno-7-66"></a>            <span class="k">for</span> <span class="n">b_key</span><span class="p">,</span> <span class="n">b_cof</span> <span class="ow">in</span> <span class="n">BB</span><span class="o">.</span><span class="n">values</span><span class="p">():</span> <span class="c1"># Only values is enough. We don&#39;t need hash(key) below</span>
<a id="__codelineno-7-67" name="__codelineno-7-67"></a>                <span class="n">intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">a_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b_key</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-7-68" name="__codelineno-7-68"></a>                <span class="k">if</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-7-69" name="__codelineno-7-69"></a>                    <span class="n">new_key</span> <span class="o">=</span> <span class="n">a_key</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-7-70" name="__codelineno-7-70"></a>                    <span class="n">new_key</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">b_key</span><span class="p">)</span>
<a id="__codelineno-7-71" name="__codelineno-7-71"></a>                    <span class="n">clw</span> <span class="o">=</span> <span class="n">aclw</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-7-72" name="__codelineno-7-72"></a>                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">intersect</span><span class="p">:</span>
<a id="__codelineno-7-73" name="__codelineno-7-73"></a>                        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a_key</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">b_key</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-7-74" name="__codelineno-7-74"></a>                        <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>  <span class="c1"># Skip XX YY ZZ</span>
<a id="__codelineno-7-75" name="__codelineno-7-75"></a>                            <span class="n">anticlock</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-7-76" name="__codelineno-7-76"></a>                            <span class="n">new_key</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">lookup_xyz</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}{</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-7-77" name="__codelineno-7-77"></a>                            <span class="k">if</span> <span class="n">anticlock</span><span class="p">:</span>
<a id="__codelineno-7-78" name="__codelineno-7-78"></a>                                <span class="n">aclw</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-7-79" name="__codelineno-7-79"></a>                            <span class="k">else</span><span class="p">:</span> <span class="n">clw</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-7-80" name="__codelineno-7-80"></a>                        <span class="k">else</span><span class="p">:</span> <span class="n">new_key</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-7-81" name="__codelineno-7-81"></a>                    <span class="k">if</span> <span class="n">clw</span><span class="o">%</span><span class="mi">2</span> <span class="o">^</span> <span class="n">aclw</span><span class="o">%</span><span class="mi">2</span> <span class="p">:</span>  <span class="c1"># Parity check</span>
<a id="__codelineno-7-82" name="__codelineno-7-82"></a>                        <span class="n">new_key</span> <span class="o">=</span> <span class="p">((</span><span class="n">bit</span><span class="p">,</span><span class="n">xyz</span><span class="p">)</span> <span class="k">for</span> <span class="n">bit</span><span class="p">,</span><span class="n">xyz</span> <span class="ow">in</span> <span class="n">new_key</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">xyz</span><span class="p">)</span>
<a id="__codelineno-7-83" name="__codelineno-7-83"></a>                        <span class="n">new_key</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">new_key</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
<a id="__codelineno-7-84" name="__codelineno-7-84"></a>                        <span class="n">new</span><span class="p">[</span><span class="n">new_key</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
<a id="__codelineno-7-85" name="__codelineno-7-85"></a>                            <span class="o">-</span><span class="n">a_cof</span> <span class="o">*</span> <span class="n">b_cof</span> 
<a id="__codelineno-7-86" name="__codelineno-7-86"></a>                            <span class="k">if</span> <span class="p">((</span><span class="n">aclw</span><span class="o">%</span><span class="mi">2</span><span class="o">-</span><span class="n">clw</span><span class="o">%</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">clw</span><span class="o">%</span><span class="mi">4</span><span class="o">+</span><span class="n">aclw</span><span class="o">%</span><span class="mi">4</span><span class="p">)</span><span class="o">%</span><span class="mi">4</span><span class="p">)</span><span class="o">%</span><span class="mi">4</span> <span class="k">else</span>
<a id="__codelineno-7-87" name="__codelineno-7-87"></a>                            <span class="o">+</span><span class="n">a_cof</span> <span class="o">*</span> <span class="n">b_cof</span><span class="p">)</span>
<a id="__codelineno-7-88" name="__codelineno-7-88"></a>    <span class="n">QO</span> <span class="o">=</span> <span class="n">QubitOperator</span>  <span class="c1"># Preload</span>
<a id="__codelineno-7-89" name="__codelineno-7-89"></a>    <span class="n">new_QO</span> <span class="o">=</span> <span class="n">QO</span><span class="p">()</span>
<a id="__codelineno-7-90" name="__codelineno-7-90"></a>    <span class="n">new_QO</span><span class="o">.</span><span class="n">terms</span> <span class="o">=</span> <span class="n">new</span>
<a id="__codelineno-7-91" name="__codelineno-7-91"></a>    <span class="n">new_QO</span><span class="o">.</span><span class="n">compress</span><span class="p">()</span>
<a id="__codelineno-7-92" name="__codelineno-7-92"></a>    <span class="k">return</span> <span class="n">new_QO</span> <span class="o">*</span> <span class="mi">2</span><span class="n">j</span>
</code></pre></div></td></tr></table></div>
<h1 id="the-end">================= THE END =================<a class="headerlink" href="#the-end" title="Permanent link">&para;</a></h1>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-03-11</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-03-11</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Hirasawa Chika
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/hirasawakinko/chika_home" target="_blank" rel="noopener" title="Visit Chika&#39;s Github repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.prune", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "header.autohide", "content.code.annotate", "content.tabs.link", "toc.integrate", "toc.follow"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d691e9de.min.js"></script>
      
    
  </body>
</html>